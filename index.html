<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SyntaxHosting ‚Äì Game Server Panel</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --primary-light: #818cf8;
      --secondary: #06b6d4;
      --accent: #8b5cf6;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --dark: #030712;
      --dark-light: #111827;
      --dark-card: #1f2937;
      --text: #f9fafb;
      --text-dim: #9ca3af;
      --border: #374151;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--dark);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.6;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 100vh;
      background: 
        radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(139, 92, 246, 0.15) 0%, transparent 40%);
      pointer-events: none;
      z-index: 0;
    }

    .nav {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-width: 1400px;
      background: rgba(31, 41, 55, 0.8);
      backdrop-filter: blur(12px);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 12px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .nav-links {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .btn {
      padding: 10px 20px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 0.9rem;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: 'Inter', sans-serif;
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-dim);
      border: 1px solid var(--border);
    }

    .btn-ghost:hover {
      background: rgba(255,255,255,0.05);
      color: var(--text);
      border-color: var(--primary-light);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: white;
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
    }

    .btn-danger {
      background: linear-gradient(135deg, var(--danger), #dc2626);
      color: white;
    }

    .btn-sm {
      padding: 6px 14px;
      font-size: 0.85rem;
      border-radius: 10px;
      font-weight: 500;
    }

    .card {
      background: var(--dark-card);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 24px;
    }

    .dashboard {
      padding-top: 100px;
      max-width: 1400px;
      margin: 0 auto;
      padding-left: 20px;
      padding-right: 20px;
    }

    .dash-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
      flex-wrap: wrap;
      gap: 20px;
    }

    .welcome-text h1 {
      font-size: 2rem;
      font-weight: 700;
    }

    .welcome-text span {
      color: var(--primary);
    }

    .dash-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .stat-card {
      background: var(--dark-card);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 24px;
    }

    .stat-card-label {
      color: var(--text-dim);
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
    }

    .stat-card-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
    }

    .servers-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .server-item {
      background: var(--dark-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px 24px;
      display: flex;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .server-status {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .status-online {
      background: var(--success);
      box-shadow: 0 0 12px var(--success);
    }

    .status-offline {
      background: var(--danger);
    }

    .status-starting {
      background: var(--warning);
    }

    .status-installing {
      background: var(--primary);
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .server-info {
      flex: 1;
      min-width: 200px;
    }

    .server-name {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 4px;
    }

    .server-meta {
      color: var(--text-dim);
      font-size: 0.85rem;
      font-family: 'JetBrains Mono', monospace;
    }

    .server-plan {
      padding: 4px 12px;
      border-radius: 100px;
      font-size: 0.8rem;
      font-weight: 600;
      background: rgba(99, 102, 241, 0.1);
      color: var(--primary);
      border: 1px solid rgba(99, 102, 241, 0.3);
    }

    .server-actions {
      display: flex;
      gap: 8px;
      margin-left: auto;
    }

    .server-detail {
      padding-top: 100px;
      max-width: 1400px;
      margin: 0 auto;
      padding-left: 20px;
      padding-right: 20px;
    }

    .server-detail-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .back-btn {
      background: var(--dark-card);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 10px 20px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 500;
    }

    .back-btn:hover {
      border-color: var(--primary);
    }

    .server-detail-tabs {
      display: flex;
      gap: 8px;
      border-bottom: 1px solid var(--border);
      margin-bottom: 30px;
      overflow-x: auto;
      padding-bottom: 2px;
    }

    .tab-btn {
      padding: 12px 24px;
      background: transparent;
      border: none;
      color: var(--text-dim);
      font-weight: 600;
      cursor: pointer;
      border-bottom: 2px solid transparent;
    }

    .tab-btn:hover {
      color: var(--text);
    }

    .tab-btn.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .console-container {
      background: #0a0c10;
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
    }

    .console-header-bar {
      background: #1a1e24;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      gap: 8px;
      border-bottom: 1px solid var(--border);
    }

    .console-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }

    .console-dot.red { background: #ff5f56; }
    .console-dot.yellow { background: #ffbd2e; }
    .console-dot.green { background: #27c93f; }

    .console-title {
      flex: 1;
      text-align: center;
      color: var(--text-dim);
      font-size: 0.85rem;
      font-family: 'JetBrains Mono', monospace;
    }

    .console-body {
      height: 400px;
      overflow-y: auto;
      padding: 16px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: #e5e7eb;
      line-height: 1.6;
    }

    .console-line {
      margin-bottom: 4px;
    }

    .console-line.success { color: var(--success); }
    .console-line.error { color: var(--danger); }
    .console-line.warning { color: var(--warning); }
    .console-line.info { color: var(--primary); }

    .console-input-area {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      background: #0a0c10;
      border-top: 1px solid var(--border);
    }

    .console-prompt {
      color: var(--success);
      font-family: 'JetBrains Mono', monospace;
    }

    .console-input {
      flex: 1;
      background: none;
      border: none;
      color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      outline: none;
    }

    .files-container {
      background: var(--dark-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
    }

    .files-header {
      padding: 16px;
      background: rgba(0, 0, 0, 0.2);
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .files-breadcrumb {
      display: flex;
      gap: 8px;
      align-items: center;
      color: var(--text-dim);
    }

    .breadcrumb-item {
      cursor: pointer;
    }
    .breadcrumb-item:hover {
      color: var(--primary);
    }

    .files-table {
      width: 100%;
      border-collapse: collapse;
    }

    .files-table th {
      text-align: left;
      padding: 12px 16px;
      color: var(--text-dim);
      font-weight: 600;
      font-size: 0.85rem;
      border-bottom: 1px solid var(--border);
    }

    .files-table td {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
    }

    .files-table tr:hover {
      background: rgba(255, 255, 255, 0.02);
    }

    .file-name {
      cursor: pointer;
    }
    .file-name:hover {
      color: var(--primary);
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .modal-overlay.open {
      opacity: 1;
      pointer-events: all;
    }

    .modal {
      background: var(--dark-card);
      border: 1px solid var(--border);
      border-radius: 30px;
      padding: 40px;
      max-width: 600px;
      width: 90%;
      position: relative;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      color: var(--text-dim);
      font-size: 1.2rem;
      cursor: pointer;
    }

    .modal-title {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .modal-sub {
      color: var(--text-dim);
      margin-bottom: 30px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: var(--text-dim);
      font-weight: 500;
    }

    .form-input {
      width: 100%;
      padding: 14px 16px;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text);
      outline: none;
    }

    .form-input:focus {
      border-color: var(--primary);
    }

    .egg-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 12px;
      margin-top: 16px;
      margin-bottom: 20px;
    }

    .egg-item {
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .egg-item:hover {
      border-color: var(--primary);
      background: rgba(99, 102, 241, 0.1);
    }

    .egg-item.selected {
      border-color: var(--primary);
      background: rgba(99, 102, 241, 0.15);
    }

    .egg-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .egg-desc {
      color: var(--text-dim);
      font-size: 0.8rem;
    }

    .toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      padding: 14px 24px;
      background: var(--dark-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text);
      font-weight: 500;
      z-index: 3000;
      transform: translateX(400px);
      transition: transform 0.3s;
    }

    .toast.show {
      transform: translateX(0);
    }

    .toast.success { border-color: var(--success); }
    .toast.error { border-color: var(--danger); }
    .toast.info { border-color: var(--primary); }

    .footer {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-dim);
      border-top: 1px solid var(--border);
      margin-top: 60px;
    }

    .hidden { display: none !important; }
    
    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255,255,255,0.2);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      display: inline-block;
      margin-right: 8px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <div class="logo">SyntaxHosting</div>
    <div class="nav-links" id="navUnauth">
      <button class="btn btn-ghost" onclick="showAuth('login')">Login</button>
      <button class="btn btn-primary" onclick="showAuth('register')">Get Started</button>
    </div>
    <div class="nav-links hidden" id="navAuth">
      <div class="user-chip" style="display:flex;align-items:center;gap:8px;background:rgba(255,255,255,0.05);padding:6px 16px;border-radius:100px;">
        <span id="userAvatar" style="background:var(--primary);width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;">U</span>
        <span id="userEmail">user@demo.com</span>
      </div>
      <button class="btn btn-ghost" onclick="showDashboard()">Dashboard</button>
      <button class="btn btn-ghost" onclick="logout()">Logout</button>
    </div>
  </nav>

  <!-- Landing Page -->
  <div id="landingPage">
    <section style="min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:100px 20px;">
      <h1 style="font-size:clamp(3rem,8vw,5rem);font-weight:800;text-align:center;max-width:800px;margin-bottom:24px;background:linear-gradient(135deg,white,var(--text-dim));-webkit-background-clip:text;-webkit-text-fill-color:transparent;">
        Game Server Hosting<br><span style="background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;">without compromises.</span>
      </h1>
      <p style="font-size:1.2rem;color:var(--text-dim);text-align:center;max-width:600px;margin-bottom:40px;">Deploy your game servers in seconds. Full control, powerful hardware, instant setup.</p>
      <div style="display:flex;gap:16px;flex-wrap:wrap;justify-content:center;">
        <button class="btn btn-primary" onclick="showAuth('register')">Start for free</button>
        <button class="btn btn-ghost" onclick="showDashboard()">View Demo ‚Üí</button>
      </div>
    </section>
    <footer class="footer">¬© 2026 SyntaxHosting. All rights reserved.</footer>
  </div>

  <!-- Auth Page -->
  <div id="authPage" class="hidden">
    <div style="min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;">
      <div class="card" style="max-width:400px;width:100%;">
        <h2 class="modal-title" id="authTitle">Welcome back</h2>
        <div class="modal-sub" id="authSub">Sign in to your SyntaxHosting account</div>
        
        <div id="authError" class="hidden" style="background:rgba(239,68,68,0.1);border:1px solid var(--danger);border-radius:12px;padding:12px;margin-bottom:20px;color:var(--danger);"></div>

        <div id="loginForm">
          <div class="form-group">
            <label>Email</label>
            <input type="email" class="form-input" id="loginEmail" placeholder="demo@example.com" value="demo@example.com">
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-input" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" value="demodemo">
          </div>
          <button class="btn btn-primary" style="width:100%" onclick="doLogin()" id="loginBtn">Sign In (Demo)</button>
          <div style="text-align:center;margin-top:20px;color:var(--text-dim)">
            No account? <a href="#" onclick="showAuth('register')" style="color:var(--primary);text-decoration:none;">Register</a>
          </div>
        </div>

        <div id="registerForm" class="hidden">
          <div class="form-group">
            <label>Username</label>
            <input type="text" class="form-input" id="regName" placeholder="cooluser123">
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" class="form-input" id="regEmail" placeholder="your@email.com">
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-input" id="regPassword" placeholder="min. 6 characters">
          </div>
          <button class="btn btn-primary" style="width:100%" onclick="doRegister()" id="regBtn">Create Account</button>
          <div style="text-align:center;margin-top:20px;color:var(--text-dim)">
            Already have an account? <a href="#" onclick="showAuth('login')" style="color:var(--primary);text-decoration:none;">Sign in</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="dashboardPage" class="hidden">
    <div class="dashboard">
      <div class="dash-header">
        <div class="welcome-text">
          <h1>Welcome, <span id="dashboardUsername">User</span>!</h1>
          <p style="color:var(--text-dim)">Manage your game servers</p>
        </div>
        <button class="btn btn-primary" onclick="openCreateModal()">+ Create Server</button>
      </div>

      <div class="dash-stats" id="dashboardStats"></div>

      <div style="margin-top:40px;">
        <h2 style="font-size:1.5rem;margin-bottom:20px;">Your Servers</h2>
        <div id="serversList" class="servers-list"></div>
      </div>
    </div>
  </div>

  <!-- Server Detail Page -->
  <div id="serverDetailPage" class="hidden">
    <div class="server-detail">
      <div class="server-detail-header">
        <button class="back-btn" onclick="showDashboard()">‚Üê Dashboard</button>
        <div>
          <h1 id="detailServerName" style="font-size:1.8rem;">Server Name</h1>
          <p style="color:var(--text-dim);font-family:'JetBrains Mono',monospace;" id="detailServerId">ID: -</p>
        </div>
        <div style="margin-left:auto;display:flex;gap:8px;">
          <button class="btn btn-sm" style="background:var(--success);color:white;" onclick="serverAction('start')">‚ñ∂ Start</button>
          <button class="btn btn-sm btn-ghost" onclick="serverAction('stop')">‚èπ Stop</button>
          <button class="btn btn-sm btn-ghost" onclick="serverAction('restart')">‚Üª Restart</button>
        </div>
      </div>

      <div class="server-detail-tabs">
        <button class="tab-btn active" onclick="switchTab('console')">Console</button>
        <button class="tab-btn" onclick="switchTab('files')">Files</button>
        <button class="tab-btn" onclick="switchTab('startup')">Startup</button>
        <button class="tab-btn" onclick="switchTab('settings')">Settings</button>
      </div>

      <!-- Console Tab -->
      <div id="tabConsole" class="tab-content active">
        <div class="console-container">
          <div class="console-header-bar">
            <div class="console-dot red"></div>
            <div class="console-dot yellow"></div>
            <div class="console-dot green"></div>
            <div class="console-title" id="detailConsoleTitle">console</div>
          </div>
          <div class="console-body" id="consoleBody"></div>
          <div class="console-input-area">
            <span class="console-prompt">$</span>
            <input type="text" class="console-input" id="consoleInput" placeholder="Enter command..." onkeydown="handleConsoleKey(event)">
          </div>
        </div>
      </div>

      <!-- Files Tab -->
      <div id="tabFiles" class="tab-content">
        <div class="files-container">
          <div class="files-header">
            <div class="files-breadcrumb" id="fileBreadcrumb">
              <span class="breadcrumb-item" onclick="loadFiles('')">/</span>
            </div>
            <div>
              <button class="btn btn-sm btn-ghost" onclick="uploadFile()">üì§ Upload</button>
              <button class="btn btn-sm btn-ghost" onclick="createFolder()">üìÅ New Folder</button>
            </div>
          </div>
          <table class="files-table">
            <thead>
              <tr><th>Name</th><th>Size</th><th>Modified</th><th>Actions</th></tr>
            </thead>
            <tbody id="filesBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Startup Tab -->
      <div id="tabStartup" class="tab-content">
        <div style="background:var(--dark-card);border:1px solid var(--border);border-radius:16px;padding:24px;">
          <h3 style="margin-bottom:20px;">Startup Configuration</h3>
          <div style="margin-bottom:16px;">
            <label>Docker Image</label>
            <div style="background:rgba(0,0,0,0.3);padding:12px;border-radius:8px;font-family:'JetBrains Mono';" id="dockerImage">ghcr.io/pterodactyl/games:minecraft</div>
          </div>
          <div style="margin-bottom:16px;">
            <label>Startup Command</label>
            <input type="text" class="form-input" id="startupCommand" value="./start.sh">
          </div>
          <button class="btn btn-primary" onclick="saveStartup()">Save Changes</button>
        </div>
      </div>

      <!-- Settings Tab -->
      <div id="tabSettings" class="tab-content">
        <div style="background:var(--dark-card);border:1px solid var(--border);border-radius:16px;padding:24px;max-width:600px;">
          <h3 style="margin-bottom:20px;">Server Settings</h3>
          <div style="margin-bottom:16px;">
            <label>Server Name</label>
            <input type="text" class="form-input" id="settingsServerName">
            <button class="btn btn-sm btn-primary" style="margin-top:10px;" onclick="updateServerName()">Update</button>
          </div>
          <div style="border:1px solid var(--danger);border-radius:12px;padding:20px;margin-top:30px;">
            <h4 style="color:var(--danger);margin-bottom:16px;">Danger Zone</h4>
            <button class="btn btn-sm btn-danger" onclick="deleteCurrentServer()">Delete Server</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Server Modal -->
  <div class="modal-overlay" id="createModal">
    <div class="modal">
      <button class="modal-close" onclick="closeCreateModal()">‚úï</button>
      <h2 class="modal-title">Create New Server</h2>
      <p class="modal-sub">Configure your server deployment</p>

      <div id="createError" class="hidden" style="background:rgba(239,68,68,0.1);border:1px solid var(--danger);border-radius:12px;padding:12px;margin-bottom:20px;color:var(--danger);"></div>

      <div class="form-group">
        <label>Server Name</label>
        <input type="text" class="form-input" id="createServerName" placeholder="my-awesome-server">
        <small style="color:var(--text-dim);display:block;margin-top:4px;">Only letters, numbers, - and _ allowed</small>
      </div>

      <div class="form-group">
        <label>Select Plan</label>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:20px;">
          <div class="plan-option selected" id="freePlan" onclick="selectPlan('free')" style="padding:16px;border:1px solid var(--border);border-radius:12px;cursor:pointer;">
            <div style="font-weight:700;">Free Plan</div>
            <div style="color:var(--text-dim);font-size:0.85rem;">256MB RAM ¬∑ 2GB SSD</div>
          </div>
          <div class="plan-option" id="premiumPlan" onclick="selectPlan('premium')" style="padding:16px;border:1px solid var(--border);border-radius:12px;cursor:pointer;">
            <div style="font-weight:700;">Premium</div>
            <div style="color:var(--text-dim);font-size:0.85rem;">2GB RAM ¬∑ 20GB SSD ¬∑ ‚Ç¨2.99/mo</div>
          </div>
        </div>
      </div>

      <h3 style="margin-bottom:16px;">Select Server Type</h3>
      
      <div class="egg-list">
        <div class="egg-item selected" onclick="selectEgg('minecraft')">
          <div class="egg-name">üéÆ Minecraft</div>
          <div class="egg-desc">Java Edition server</div>
        </div>
        <div class="egg-item" onclick="selectEgg('minecraft-bedrock')">
          <div class="egg-name">üì± Minecraft Bedrock</div>
          <div class="egg-desc">Bedrock Edition server</div>
        </div>
        <div class="egg-item" onclick="selectEgg('source')">
          <div class="egg-name">üî´ Source Games</div>
          <div class="egg-desc">CS:GO, TF2, etc.</div>
        </div>
        <div class="egg-item" onclick="selectEgg('nodejs')">
          <div class="egg-name">‚¨¢ Node.js</div>
          <div class="egg-desc">JavaScript applications</div>
        </div>
        <div class="egg-item" onclick="selectEgg('python')">
          <div class="egg-name">üêç Python</div>
          <div class="egg-desc">Python apps & bots</div>
        </div>
        <div class="egg-item" onclick="selectEgg('discord')">
          <div class="egg-name">ü§ñ Discord Bot</div>
          <div class="egg-desc">discord.py, discord.js</div>
        </div>
      </div>

      <div style="display:flex;gap:10px;margin-top:20px;">
        <button class="btn btn-ghost" style="flex:1;" onclick="closeCreateModal()">Cancel</button>
        <button class="btn btn-primary" style="flex:2;" onclick="createServer()" id="createBtn">Create Server</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    // ==================== STATE ====================
    let currentUser = null;
    let servers = {};
    let selectedPlan = 'free';
    let selectedEgg = 'minecraft';
    let currentServerId = null;
    let currentPath = '';
    let consoleHistory = [];
    let consoleHistoryIndex = -1;
    let resourceInterval = null;

    // Mock files data
    const mockFiles = {
      '': [
        { name: 'server.jar', size: '45.2 MB', modified: '2026-02-20 14:30', type: 'file' },
        { name: 'server.properties', size: '2.1 KB', modified: '2026-02-21 09:15', type: 'file' },
        { name: 'plugins', size: '-', modified: '2026-02-19', type: 'folder' },
        { name: 'logs', size: '-', modified: '2026-02-22', type: 'folder' },
        { name: 'world', size: '-', modified: '2026-02-20', type: 'folder' },
      ],
      'plugins': [
        { name: 'Essentials.jar', size: '1.8 MB', modified: '2026-02-20', type: 'file' },
        { name: 'WorldEdit.jar', size: '3.2 MB', modified: '2026-02-20', type: 'file' },
      ],
      'logs': [
        { name: 'latest.log', size: '156 KB', modified: '2026-02-22 10:23', type: 'file' },
      ]
    };

    // ==================== INIT ====================
    function init() {
      // Load from localStorage
      const saved = localStorage.getItem('syntaxhosting_servers');
      if (saved) {
        servers = JSON.parse(saved);
      } else {
        // Add demo server
        servers = {
          'demo1': {
            id: 'demo1',
            name: 'My Minecraft Server',
            plan: 'premium',
            egg: 'minecraft',
            eggName: 'Minecraft',
            status: 'online',
            ram: '2GB',
            ssd: '20GB',
            createdAt: Date.now() - 86400000,
            dockerImage: 'ghcr.io/pterodactyl/games:minecraft',
            startup: './start.sh'
          }
        };
        saveServers();
      }
      
      // Auto-login demo
      setTimeout(() => {
        currentUser = { email: 'demo@example.com', uid: 'demo-user' };
        document.getElementById('navUnauth').classList.add('hidden');
        document.getElementById('navAuth').classList.remove('hidden');
        document.getElementById('userEmail').textContent = 'demo@example.com';
        document.getElementById('userAvatar').textContent = 'D';
        document.getElementById('dashboardUsername').textContent = 'Demo User';
        showDashboard();
      }, 100);
    }

    function saveServers() {
      localStorage.setItem('syntaxhosting_servers', JSON.stringify(servers));
    }

    // ==================== NAVIGATION ====================
    function showLanding() {
      hideAllPages();
      document.getElementById('landingPage').classList.remove('hidden');
    }

    function showAuth(mode) {
      hideAllPages();
      document.getElementById('authPage').classList.remove('hidden');
      
      if (mode === 'login') {
        document.getElementById('authTitle').textContent = 'Welcome back';
        document.getElementById('loginForm').classList.remove('hidden');
        document.getElementById('registerForm').classList.add('hidden');
      } else {
        document.getElementById('authTitle').textContent = 'Create account';
        document.getElementById('loginForm').classList.add('hidden');
        document.getElementById('registerForm').classList.remove('hidden');
      }
    }

    function showDashboard() {
      hideAllPages();
      document.getElementById('dashboardPage').classList.remove('hidden');
      renderServers();
      updateDashboardStats();
      if (resourceInterval) clearInterval(resourceInterval);
    }

    function showServerDetail(serverId) {
      hideAllPages();
      document.getElementById('serverDetailPage').classList.remove('hidden');
      currentServerId = serverId;
      loadServerDetail(serverId);
    }

    function hideAllPages() {
      document.getElementById('landingPage').classList.add('hidden');
      document.getElementById('authPage').classList.add('hidden');
      document.getElementById('dashboardPage').classList.add('hidden');
      document.getElementById('serverDetailPage').classList.add('hidden');
    }

    // ==================== AUTH ====================
    function doLogin() {
      currentUser = { email: 'demo@example.com', uid: 'demo-user' };
      document.getElementById('navUnauth').classList.add('hidden');
      document.getElementById('navAuth').classList.remove('hidden');
      document.getElementById('userEmail').textContent = 'demo@example.com';
      document.getElementById('userAvatar').textContent = 'D';
      document.getElementById('dashboardUsername').textContent = 'Demo User';
      showDashboard();
      showToast('Logged in as demo user', 'success');
    }

    function doRegister() {
      doLogin(); // Just login for demo
    }

    function logout() {
      currentUser = null;
      document.getElementById('navUnauth').classList.remove('hidden');
      document.getElementById('navAuth').classList.add('hidden');
      showLanding();
      showToast('Logged out', 'info');
    }

    // ==================== SERVERS ====================
    function renderServers() {
      const container = document.getElementById('serversList');
      
      if (Object.keys(servers).length === 0) {
        container.innerHTML = `
          <div class="card" style="text-align:center;padding:60px;">
            <div style="font-size:3rem;margin-bottom:16px;">üéÆ</div>
            <h3 style="margin-bottom:8px;">No servers yet</h3>
            <p style="color:var(--text-dim);margin-bottom:20px;">Create your first server to get started</p>
            <button class="btn btn-primary" onclick="openCreateModal()">Create Server</button>
          </div>
        `;
        return;
      }

      container.innerHTML = '';
      Object.values(servers).forEach(server => {
        const statusClass = 
          server.status === 'online' ? 'status-online' : 
          server.status === 'starting' ? 'status-starting' : 
          server.status === 'installing' ? 'status-installing' : 'status-offline';
        
        const date = server.createdAt ? new Date(server.createdAt).toLocaleDateString() : '?';
        
        let icon = 'üéÆ';
        if (server.egg === 'nodejs') icon = '‚¨¢';
        else if (server.egg === 'python') icon = 'üêç';
        else if (server.egg === 'discord') icon = 'ü§ñ';
        else if (server.egg === 'minecraft-bedrock') icon = 'üì±';
        else if (server.egg === 'source') icon = 'üî´';
        
        container.innerHTML += `
          <div class="server-item">
            <div class="server-status ${statusClass}"></div>
            <div class="server-info">
              <div class="server-name">${escapeHtml(server.name)}</div>
              <div class="server-meta">${icon} ${server.eggName || 'Minecraft'} ¬∑ ${server.ram} RAM ¬∑ Created ${date}</div>
            </div>
            <div class="server-plan">${server.plan === 'premium' ? 'Premium' : 'Free'}</div>
            <div class="server-actions">
              <button class="btn btn-sm btn-primary" onclick="openServerDetail('${server.id}')">Manage</button>
              <button class="btn btn-sm btn-danger" onclick="deleteServer('${server.id}')">Delete</button>
            </div>
          </div>
        `;
      });
    }

    function updateDashboardStats() {
      const serverList = Object.values(servers);
      const totalServers = serverList.length;
      const hasPremium = serverList.some(s => s.plan === 'premium');
      const totalRam = serverList.reduce((acc, s) => acc + (s.ram === '2GB' ? 2048 : 256), 0);
      const totalSsd = serverList.reduce((acc, s) => acc + (s.ssd === '20GB' ? 20 : 2), 0);

      document.getElementById('dashboardStats').innerHTML = `
        <div class="stat-card"><div class="stat-card-label">Servers</div><div class="stat-card-value">${totalServers}</div></div>
        <div class="stat-card"><div class="stat-card-label">Plan</div><div class="stat-card-value">${hasPremium ? 'Premium' : 'Free'}</div></div>
        <div class="stat-card"><div class="stat-card-label">RAM Total</div><div class="stat-card-value">${totalRam >= 1024 ? (totalRam/1024).toFixed(1)+'GB' : totalRam+'MB'}</div></div>
        <div class="stat-card"><div class="stat-card-label">SSD Total</div><div class="stat-card-value">${totalSsd}GB</div></div>
      `;
    }

    function deleteServer(serverId) {
      if (!confirm('Delete this server? This cannot be undone.')) return;
      delete servers[serverId];
      saveServers();
      renderServers();
      updateDashboardStats();
      showToast('Server deleted', 'info');
    }

    // ==================== CREATE MODAL ====================
    function openCreateModal() {
      document.getElementById('createServerName').value = '';
      document.getElementById('createError').classList.add('hidden');
      document.getElementById('createModal').classList.add('open');
      selectPlan('free');
      selectEgg('minecraft');
    }

    function closeCreateModal() {
      document.getElementById('createModal').classList.remove('open');
    }

    window.selectPlan = function(plan) {
      selectedPlan = plan;
      document.getElementById('freePlan').classList.toggle('selected', plan === 'free');
      document.getElementById('premiumPlan').classList.toggle('selected', plan === 'premium');
    };

    window.selectEgg = function(egg) {
      selectedEgg = egg;
      document.querySelectorAll('.egg-item').forEach(el => el.classList.remove('selected'));
      event.currentTarget.classList.add('selected');
    };

    function createServer() {
      const name = document.getElementById('createServerName').value.trim();
      
      if (!name) {
        showCreateError('Please enter a server name');
        return;
      }
      if (!/^[a-zA-Z0-9_-]+$/.test(name)) {
        showCreateError('Only letters, numbers, - and _ allowed');
        return;
      }

      // Check free limit
      if (selectedPlan === 'free') {
        const freeCount = Object.values(servers).filter(s => s.plan === 'free').length;
        if (freeCount >= 1) {
          showCreateError('Free plan allows only 1 server');
          return;
        }
      }

      const btn = document.getElementById('createBtn');
      btn.disabled = true;
      btn.innerHTML = '<span class="spinner"></span> Creating...';

      const specs = selectedPlan === 'free' ? 
        { ram: '256MB', ssd: '2GB' } : 
        { ram: '2GB', ssd: '20GB' };

      const eggNames = {
        'minecraft': 'Minecraft',
        'minecraft-bedrock': 'Minecraft Bedrock',
        'source': 'Source Games',
        'nodejs': 'Node.js',
        'python': 'Python',
        'discord': 'Discord Bot'
      };

      const newId = 'server_' + Date.now();
      servers[newId] = {
        id: newId,
        name: name,
        plan: selectedPlan,
        egg: selectedEgg,
        eggName: eggNames[selectedEgg],
        status: 'installing',
        ram: specs.ram,
        ssd: specs.ssd,
        createdAt: Date.now(),
        dockerImage: getDockerImage(selectedEgg),
        startup: './start.sh'
      };

      saveServers();
      closeCreateModal();
      showToast('Server created! Installing...', 'success');

      // Simulate installation
      setTimeout(() => {
        if (servers[newId]) {
          servers[newId].status = 'offline';
          saveServers();
          renderServers();
          showToast('Server installation complete', 'success');
        }
      }, 4000);

      btn.disabled = false;
      btn.innerHTML = 'Create Server';
      renderServers();
      updateDashboardStats();
    }

    function getDockerImage(egg) {
      const images = {
        'minecraft': 'ghcr.io/pterodactyl/games:minecraft',
        'minecraft-bedrock': 'ghcr.io/pterodactyl/games:bedrock',
        'source': 'ghcr.io/pterodactyl/games:source',
        'nodejs': 'node:18-slim',
        'python': 'python:3.11-slim',
        'discord': 'node:18-slim'
      };
      return images[egg] || 'alpine:latest';
    }

    function showCreateError(msg) {
      const el = document.getElementById('createError');
      el.textContent = msg;
      el.classList.remove('hidden');
    }

    // ==================== SERVER DETAIL ====================
    function openServerDetail(serverId) {
      const server = servers[serverId];
      if (!server) return;

      currentServerId = serverId;
      document.getElementById('detailServerName').textContent = server.name;
      document.getElementById('detailServerId').textContent = `ID: ${serverId.substring(0,8)}...`;
      document.getElementById('detailConsoleTitle').textContent = `${server.name} ‚Äî console`;
      document.getElementById('settingsServerName').value = server.name;

      // Console
      const consoleBody = document.getElementById('consoleBody');
      consoleBody.innerHTML = '';
      printToConsole('info', '=== SyntaxHosting Panel v1.0 ===');
      printToConsole('dim', `Server: ${server.name}`);
      printToConsole('dim', `Type: ${server.eggName}`);
      printToConsole('dim', `Status: ${server.status}`);
      printToConsole('dim', `Type 'help' for commands`);
      
      if (server.status === 'installing') {
        printToConsole('warning', 'üì¶ Server is installing...');
      } else if (server.status === 'online') {
        printToConsole('success', '‚úÖ Server is online');
      } else {
        printToConsole('dim', '‚èπÔ∏è Server is offline');
      }

      // Files
      loadFiles('');

      // Startup
      document.getElementById('dockerImage').textContent = server.dockerImage;
      document.getElementById('startupCommand').value = server.startup;

      showServerDetail(serverId);
    }

    function switchTab(tab) {
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      document.querySelector(`.tab-btn[onclick="switchTab('${tab}')"]`).classList.add('active');
      document.getElementById(`tab${tab.charAt(0).toUpperCase() + tab.slice(1)}`).classList.add('active');
    }

    // ==================== CONSOLE ====================
    function printToConsole(type, text) {
      const consoleBody = document.getElementById('consoleBody');
      const line = document.createElement('div');
      line.className = `console-line ${type}`;
      line.textContent = text;
      consoleBody.appendChild(line);
      consoleBody.scrollTop = consoleBody.scrollHeight;
    }

    function handleConsoleKey(e) {
      if (e.key === 'Enter') {
        const input = document.getElementById('consoleInput');
        const cmd = input.value.trim();
        if (!cmd) return;

        consoleHistory.unshift(cmd);
        consoleHistoryIndex = -1;
        
        printToConsole('', `$ ${cmd}`);
        input.value = '';
        processConsoleCommand(cmd);
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        if (consoleHistoryIndex < consoleHistory.length - 1) {
          consoleHistoryIndex++;
          document.getElementById('consoleInput').value = consoleHistory[consoleHistoryIndex];
        }
      } else if (e.key === 'ArrowDown') {
        e.preventDefault();
        if (consoleHistoryIndex > 0) {
          consoleHistoryIndex--;
          document.getElementById('consoleInput').value = consoleHistory[consoleHistoryIndex];
        } else {
          consoleHistoryIndex = -1;
          document.getElementById('consoleInput').value = '';
        }
      }
    }

    function processConsoleCommand(cmd) {
      const main = cmd.toLowerCase().split(' ')[0];

      switch(main) {
        case 'help':
          printToConsole('info', 'Commands: start, stop, restart, status, clear');
          break;
        case 'start':
          serverAction('start');
          break;
        case 'stop':
          serverAction('stop');
          break;
        case 'restart':
          serverAction('restart');
          break;
        case 'status':
          printToConsole('', `Status: ${servers[currentServerId]?.status || 'unknown'}`);
          break;
        case 'clear':
          document.getElementById('consoleBody').innerHTML = '';
          break;
        default:
          printToConsole('error', `Unknown command: ${main}`);
      }
    }

    function serverAction(action) {
      if (!currentServerId || !servers[currentServerId]) return;
      
      const server = servers[currentServerId];
      
      switch(action) {
        case 'start':
          printToConsole('warning', 'Starting server...');
          server.status = 'starting';
          setTimeout(() => {
            server.status = 'online';
            printToConsole('success', 'Server started');
            saveServers();
          }, 2000);
          break;
        case 'stop':
          printToConsole('warning', 'Stopping server...');
          server.status = 'offline';
          setTimeout(() => {
            printToConsole('info', 'Server stopped');
            saveServers();
          }, 1500);
          break;
        case 'restart':
          printToConsole('warning', 'Restarting server...');
          server.status = 'starting';
          setTimeout(() => {
            server.status = 'online';
            printToConsole('success', 'Server restarted');
            saveServers();
          }, 2500);
          break;
      }
    }

    // ==================== FILES ====================
    function loadFiles(path) {
      currentPath = path;
      const files = mockFiles[path] || mockFiles[''];
      
      // Breadcrumb
      const breadcrumb = document.getElementById('fileBreadcrumb');
      breadcrumb.innerHTML = '';
      
      const parts = path.split('/').filter(p => p);
      let currentPath = '';
      
      const rootSpan = document.createElement('span');
      rootSpan.className = 'breadcrumb-item';
      rootSpan.textContent = '/';
      rootSpan.onclick = () => loadFiles('');
      breadcrumb.appendChild(rootSpan);
      
      parts.forEach(part => {
        currentPath += (currentPath ? '/' : '') + part;
        const sep = document.createElement('span');
        sep.className = 'breadcrumb-separator';
        sep.textContent = '/';
        breadcrumb.appendChild(sep);
        
        const span = document.createElement('span');
        span.className = 'breadcrumb-item';
        span.textContent = part;
        span.onclick = () => loadFiles(currentPath);
        breadcrumb.appendChild(span);
      });

      // Files table
      const tbody = document.getElementById('filesBody');
      tbody.innerHTML = '';
      
      if (path !== '') {
        tbody.innerHTML += `
          <tr>
            <td><span style="margin-right:12px;">üìÅ</span><span class="file-name" onclick="loadFiles('${path.substring(0, path.lastIndexOf('/'))}')">..</span></td>
            <td>-</td><td>-</td><td></td>
          </tr>
        `;
      }
      
      files.forEach(file => {
        const icon = file.type === 'folder' ? 'üìÅ' : 'üìÑ';
        tbody.innerHTML += `
          <tr>
            <td><span style="margin-right:12px;">${icon}</span><span class="file-name" onclick="${file.type === 'folder' ? `loadFiles('${path ? path + '/' : ''}${file.name}')` : ''}">${file.name}</span></td>
            <td>${file.size}</td>
            <td>${file.modified}</td>
            <td><button class="btn btn-sm btn-ghost" onclick="showToast('Demo feature')">‚ãØ</button></td>
          </tr>
        `;
      });
    }

    function uploadFile() { showToast('Upload demo'); }
    function createFolder() { showToast('Create folder demo'); }

    // ==================== SETTINGS ====================
    function updateServerName() {
      const newName = document.getElementById('settingsServerName').value;
      if (newName && currentServerId && servers[currentServerId]) {
        servers[currentServerId].name = newName;
        document.getElementById('detailServerName').textContent = newName;
        saveServers();
        showToast('Server name updated');
      }
    }

    function deleteCurrentServer() {
      if (!currentServerId) return;
      if (confirm('Delete this server?')) {
        delete servers[currentServerId];
        saveServers();
        showDashboard();
        showToast('Server deleted');
      }
    }

    function saveStartup() {
      showToast('Startup saved (demo)');
    }

    // ==================== UTILS ====================
    function showToast(msg, type = 'info') {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.className = `toast show ${type}`;
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    function escapeHtml(str) {
      return String(str).replace(/[&<>]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;'})[c]);
    }

    // ==================== EXPORTS ====================
    window.showLanding = showLanding;
    window.showAuth = showAuth;
    window.showDashboard = showDashboard;
    window.doLogin = doLogin;
    window.doRegister = doRegister;
    window.logout = logout;
    window.openCreateModal = openCreateModal;
    window.closeCreateModal = closeCreateModal;
    window.createServer = createServer;
    window.deleteServer = deleteServer;
    window.openServerDetail = openServerDetail;
    window.switchTab = switchTab;
    window.handleConsoleKey = handleConsoleKey;
    window.serverAction = serverAction;
    window.loadFiles = loadFiles;
    window.uploadFile = uploadFile;
    window.createFolder = createFolder;
    window.updateServerName = updateServerName;
    window.deleteCurrentServer = deleteCurrentServer;
    window.saveStartup = saveStartup;

    // Start
    init();
  </script>
</body>
</html>
