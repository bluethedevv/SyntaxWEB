<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SyntaxHosting ‚Äì Premium Game Server Hosting</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --glass: rgba(255,255,255,0.07);
    --glass-border: rgba(255,255,255,0.15);
    --glass-hover: rgba(255,255,255,0.12);
    --accent: #00e5ff;
    --accent2: #7c3aed;
    --bg: #050810;
    --text: #e8eaf6;
    --text-dim: rgba(232,234,246,0.55);
    --success: #00e676;
    --danger: #ff1744;
    --warning: #ffab00;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Syne', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* BG MESH */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      radial-gradient(ellipse 80% 60% at 20% 10%, rgba(0,229,255,0.08) 0%, transparent 60%),
      radial-gradient(ellipse 60% 80% at 80% 90%, rgba(124,58,237,0.1) 0%, transparent 60%),
      radial-gradient(ellipse 40% 40% at 50% 50%, rgba(0,229,255,0.04) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
  }

  /* LIQUID GLASS */
  .glass {
    background: var(--glass);
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
  }

  .glass-heavy {
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
    -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
    border: 1px solid rgba(255,255,255,0.18);
    border-radius: 20px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.1);
  }

  /* NAV */
  #nav {
    position: fixed;
    top: 16px;
    left: 50%;
    transform: translateX(-50%);
    width: calc(100% - 40px);
    max-width: 1200px;
    z-index: 1000;
    padding: 14px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(5,8,16,0.6);
    backdrop-filter: blur(30px) saturate(180%);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 14px;
    box-shadow: 0 4px 24px rgba(0,0,0,0.5);
  }

  .logo {
    font-size: 1.3rem;
    font-weight: 800;
    letter-spacing: -0.5px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .nav-links { display: flex; gap: 8px; align-items: center; }

  .btn {
    padding: 9px 20px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-family: 'Syne', sans-serif;
    font-weight: 600;
    font-size: 0.85rem;
    transition: all 0.2s;
  }

  .btn-ghost {
    background: transparent;
    color: var(--text-dim);
    border: 1px solid rgba(255,255,255,0.1);
  }
  .btn-ghost:hover { background: var(--glass); color: var(--text); }

  .btn-primary {
    background: linear-gradient(135deg, var(--accent), #0097a7);
    color: #000;
    font-weight: 700;
    box-shadow: 0 0 20px rgba(0,229,255,0.3);
  }
  .btn-primary:hover { box-shadow: 0 0 30px rgba(0,229,255,0.5); transform: translateY(-1px); }

  .btn-danger {
    background: linear-gradient(135deg, var(--danger), #b71c1c);
    color: #fff;
  }
  .btn-danger:hover { opacity: 0.85; }

  .btn-success {
    background: linear-gradient(135deg, var(--success), #00897b);
    color: #000;
    font-weight: 700;
  }

  /* PAGES */
  .page { display: none; }
  .page.active { display: block; }

  /* LANDING */
  #landing {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 100px 20px 60px;
    position: relative;
    z-index: 1;
  }

  .hero-tag {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 16px;
    border-radius: 50px;
    background: rgba(0,229,255,0.1);
    border: 1px solid rgba(0,229,255,0.3);
    font-size: 0.78rem;
    font-weight: 600;
    color: var(--accent);
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-bottom: 28px;
    animation: fadeUp 0.6s ease both;
  }

  .hero-title {
    font-size: clamp(2.8rem, 7vw, 5.5rem);
    font-weight: 800;
    line-height: 1.05;
    text-align: center;
    max-width: 800px;
    margin-bottom: 24px;
    animation: fadeUp 0.6s 0.1s ease both;
  }

  .hero-title span {
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero-sub {
    font-size: 1.1rem;
    color: var(--text-dim);
    text-align: center;
    max-width: 520px;
    line-height: 1.6;
    margin-bottom: 40px;
    animation: fadeUp 0.6s 0.2s ease both;
  }

  .hero-cta {
    display: flex;
    gap: 12px;
    animation: fadeUp 0.6s 0.3s ease both;
  }

  .hero-cta .btn { padding: 13px 32px; font-size: 0.95rem; border-radius: 12px; }

  /* STATS */
  .stats-row {
    display: flex;
    gap: 24px;
    margin-top: 72px;
    flex-wrap: wrap;
    justify-content: center;
    animation: fadeUp 0.6s 0.4s ease both;
  }

  .stat-card {
    padding: 24px 32px;
    text-align: center;
    min-width: 160px;
  }

  .stat-card .num {
    font-size: 2.2rem;
    font-weight: 800;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .stat-card .label { font-size: 0.8rem; color: var(--text-dim); margin-top: 4px; letter-spacing: 0.5px; }

  /* PRICING */
  #pricing-section {
    padding: 80px 20px;
    max-width: 1100px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }

  .section-title {
    text-align: center;
    font-size: 2.4rem;
    font-weight: 800;
    margin-bottom: 12px;
  }

  .section-sub {
    text-align: center;
    color: var(--text-dim);
    margin-bottom: 48px;
    font-size: 1rem;
  }

  .plans-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
  }

  .plan-card {
    padding: 32px;
    position: relative;
    overflow: hidden;
    transition: transform 0.2s;
  }

  .plan-card:hover { transform: translateY(-4px); }

  .plan-card.featured {
    border-color: rgba(0,229,255,0.4);
    background: rgba(0,229,255,0.05);
  }

  .plan-badge {
    position: absolute;
    top: 16px;
    right: 16px;
    padding: 4px 12px;
    border-radius: 50px;
    font-size: 0.7rem;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: #000;
  }

  .plan-name {
    font-size: 1.4rem;
    font-weight: 800;
    margin-bottom: 4px;
  }

  .plan-price {
    font-size: 2.8rem;
    font-weight: 800;
    margin: 16px 0 8px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .plan-price span { font-size: 1rem; color: var(--text-dim); font-weight: 400; -webkit-text-fill-color: initial; }

  .plan-features {
    list-style: none;
    margin: 20px 0 28px;
  }

  .plan-features li {
    padding: 8px 0;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    font-size: 0.9rem;
    color: var(--text-dim);
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .plan-features li::before {
    content: '‚úì';
    color: var(--success);
    font-weight: 700;
    font-size: 0.85rem;
    flex-shrink: 0;
  }

  /* AUTH */
  #auth-page {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    position: relative;
    z-index: 1;
  }

  .auth-box {
    width: 100%;
    max-width: 420px;
    padding: 40px;
  }

  .auth-title {
    font-size: 1.8rem;
    font-weight: 800;
    margin-bottom: 8px;
  }

  .auth-sub { color: var(--text-dim); font-size: 0.9rem; margin-bottom: 32px; }

  .form-group { margin-bottom: 20px; }

  .form-group label {
    display: block;
    font-size: 0.82rem;
    font-weight: 600;
    color: var(--text-dim);
    margin-bottom: 8px;
    letter-spacing: 0.3px;
  }

  .form-input {
    width: 100%;
    padding: 12px 16px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 10px;
    color: var(--text);
    font-family: 'Syne', sans-serif;
    font-size: 0.95rem;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .form-input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(0,229,255,0.1);
  }

  .form-input::placeholder { color: rgba(255,255,255,0.3); }

  .auth-switch {
    text-align: center;
    margin-top: 20px;
    font-size: 0.88rem;
    color: var(--text-dim);
  }

  .auth-switch a {
    color: var(--accent);
    cursor: pointer;
    text-decoration: none;
    font-weight: 600;
  }

  .error-msg {
    padding: 12px 16px;
    background: rgba(255,23,68,0.1);
    border: 1px solid rgba(255,23,68,0.3);
    border-radius: 8px;
    color: #ff5252;
    font-size: 0.85rem;
    margin-bottom: 16px;
    display: none;
  }

  /* DASHBOARD */
  #dashboard {
    padding-top: 90px;
    min-height: 100vh;
    position: relative;
    z-index: 1;
  }

  .dash-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 32px 20px;
  }

  .dash-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 32px;
    flex-wrap: gap;
    gap: 16px;
  }

  .dash-welcome { font-size: 1.5rem; font-weight: 800; }
  .dash-welcome span { color: var(--accent); }

  .dash-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 20px;
    margin-bottom: 32px;
  }

  .dash-stat {
    padding: 24px;
  }

  .dash-stat-label {
    font-size: 0.78rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-dim);
    margin-bottom: 10px;
  }

  .dash-stat-val {
    font-size: 2rem;
    font-weight: 800;
    color: var(--accent);
    font-family: 'JetBrains Mono', monospace;
  }

  /* SERVERS */
  .servers-section { margin-bottom: 32px; }
  .servers-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }
  .servers-title { font-size: 1.2rem; font-weight: 700; }

  .server-card {
    padding: 20px 24px;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
  }

  .server-status {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--success);
    box-shadow: 0 0 8px var(--success);
    flex-shrink: 0;
    animation: pulse 2s infinite;
  }

  .server-status.offline { background: var(--danger); box-shadow: 0 0 8px var(--danger); animation: none; }
  .server-status.starting { background: var(--warning); box-shadow: 0 0 8px var(--warning); }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  .server-info { flex: 1; min-width: 0; }
  .server-name { font-weight: 700; font-size: 1rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .server-meta { font-size: 0.78rem; color: var(--text-dim); margin-top: 2px; font-family: 'JetBrains Mono', monospace; }

  .server-plan-badge {
    padding: 4px 12px;
    border-radius: 50px;
    font-size: 0.72rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }

  .badge-free { background: rgba(255,255,255,0.08); color: var(--text-dim); }
  .badge-premium { background: rgba(0,229,255,0.12); color: var(--accent); border: 1px solid rgba(0,229,255,0.3); }

  .server-actions { display: flex; gap: 8px; }

  .btn-sm {
    padding: 7px 14px;
    font-size: 0.8rem;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-family: 'Syne', sans-serif;
    font-weight: 600;
    transition: all 0.2s;
  }

  .btn-sm-glass {
    background: var(--glass);
    border: 1px solid var(--glass-border);
    color: var(--text);
  }
  .btn-sm-glass:hover { background: var(--glass-hover); }

  .btn-sm-danger {
    background: rgba(255,23,68,0.15);
    border: 1px solid rgba(255,23,68,0.3);
    color: #ff5252;
  }
  .btn-sm-danger:hover { background: rgba(255,23,68,0.25); }

  .btn-sm-accent {
    background: rgba(0,229,255,0.12);
    border: 1px solid rgba(0,229,255,0.3);
    color: var(--accent);
  }

  /* CREATE SERVER MODAL */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(8px);
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
  }

  .modal-overlay.open {
    opacity: 1;
    pointer-events: all;
  }

  .modal {
    width: 100%;
    max-width: 560px;
    padding: 36px;
    position: relative;
  }

  .modal-close {
    position: absolute;
    top: 16px;
    right: 16px;
    background: rgba(255,255,255,0.08);
    border: none;
    color: var(--text);
    width: 32px;
    height: 32px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
  }
  .modal-close:hover { background: rgba(255,255,255,0.15); }

  .modal-title { font-size: 1.5rem; font-weight: 800; margin-bottom: 4px; }
  .modal-sub { color: var(--text-dim); font-size: 0.88rem; margin-bottom: 28px; }

  .plan-selector {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 20px;
  }

  .plan-option {
    padding: 16px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.1);
    cursor: pointer;
    transition: all 0.2s;
    background: rgba(255,255,255,0.04);
  }

  .plan-option:hover { border-color: rgba(0,229,255,0.3); background: rgba(0,229,255,0.05); }
  .plan-option.selected { border-color: var(--accent); background: rgba(0,229,255,0.08); box-shadow: 0 0 0 1px var(--accent); }
  .plan-option.disabled { opacity: 0.4; cursor: not-allowed; }
  .plan-option.disabled:hover { border-color: rgba(255,255,255,0.1); background: rgba(255,255,255,0.04); }

  .plan-opt-name { font-weight: 700; font-size: 0.95rem; margin-bottom: 6px; }
  .plan-opt-specs { font-size: 0.78rem; color: var(--text-dim); line-height: 1.6; }

  /* CONSOLE */
  #console-page {
    padding-top: 90px;
    min-height: 100vh;
    position: relative;
    z-index: 1;
  }

  .console-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 32px 20px;
  }

  .console-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 24px;
    flex-wrap: wrap;
  }

  .console-back {
    background: var(--glass);
    border: 1px solid var(--glass-border);
    color: var(--text);
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-family: 'Syne', sans-serif;
    font-weight: 600;
    font-size: 0.85rem;
    transition: all 0.2s;
  }
  .console-back:hover { background: var(--glass-hover); }

  .console-server-name { font-size: 1.3rem; font-weight: 800; }

  .console-layout {
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 20px;
  }

  @media (max-width: 900px) {
    .console-layout { grid-template-columns: 1fr; }
  }

  .console-terminal {
    border-radius: 16px;
    overflow: hidden;
    border: 1px solid rgba(255,255,255,0.1);
  }

  .terminal-bar {
    padding: 12px 16px;
    background: rgba(0,0,0,0.4);
    display: flex;
    align-items: center;
    gap: 8px;
    border-bottom: 1px solid rgba(255,255,255,0.07);
  }

  .term-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
  }
  .term-dot.red { background: #ff5f57; }
  .term-dot.yellow { background: #febc2e; }
  .term-dot.green { background: #28c840; }

  .terminal-title {
    flex: 1;
    text-align: center;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.78rem;
    color: var(--text-dim);
    margin-left: -60px;
  }

  .terminal-body {
    background: rgba(0,0,0,0.5);
    min-height: 400px;
    padding: 16px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.82rem;
    line-height: 1.7;
    overflow-y: auto;
    max-height: 500px;
  }

  .term-line { margin-bottom: 2px; }
  .term-info { color: #4fc3f7; }
  .term-warn { color: var(--warning); }
  .term-error { color: #ff5252; }
  .term-success { color: var(--success); }
  .term-dim { color: rgba(255,255,255,0.35); }

  .terminal-input-row {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 16px;
    background: rgba(0,0,0,0.4);
    border-top: 1px solid rgba(255,255,255,0.07);
  }

  .term-prompt { color: var(--success); font-family: 'JetBrains Mono', monospace; font-size: 0.82rem; white-space: nowrap; }

  .term-input {
    flex: 1;
    background: none;
    border: none;
    outline: none;
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.82rem;
  }

  /* SIDEBAR */
  .console-sidebar { display: flex; flex-direction: column; gap: 16px; }

  .sidebar-card { padding: 20px; }

  .sidebar-title {
    font-size: 0.78rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-dim);
    margin-bottom: 14px;
    font-weight: 600;
  }

  .resource-bar {
    margin-bottom: 14px;
  }

  .resource-label {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    margin-bottom: 6px;
    color: var(--text-dim);
  }

  .resource-label span:last-child { color: var(--text); font-weight: 600; font-family: 'JetBrains Mono', monospace; }

  .progress-track {
    height: 6px;
    background: rgba(255,255,255,0.08);
    border-radius: 4px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    border-radius: 4px;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    transition: width 0.5s ease;
  }

  .console-btn-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .server-info-row {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    font-size: 0.82rem;
  }

  .server-info-row:last-child { border-bottom: none; }
  .server-info-row .key { color: var(--text-dim); }
  .server-info-row .val { font-family: 'JetBrains Mono', monospace; color: var(--text); }

  /* EMPTY STATE */
  .empty-state {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-dim);
  }

  .empty-state .icon {
    font-size: 3rem;
    margin-bottom: 16px;
    opacity: 0.4;
  }

  .empty-state h3 { font-size: 1.1rem; font-weight: 700; color: var(--text); margin-bottom: 8px; }
  .empty-state p { font-size: 0.88rem; }

  /* TOAST */
  #toast {
    position: fixed;
    bottom: 24px;
    right: 24px;
    z-index: 9999;
    padding: 14px 20px;
    border-radius: 12px;
    font-size: 0.88rem;
    font-weight: 600;
    max-width: 340px;
    transform: translateY(100px);
    opacity: 0;
    transition: all 0.3s;
    pointer-events: none;
  }

  #toast.show {
    transform: translateY(0);
    opacity: 1;
  }

  #toast.success { background: rgba(0,230,118,0.15); border: 1px solid rgba(0,230,118,0.4); color: var(--success); }
  #toast.error { background: rgba(255,23,68,0.15); border: 1px solid rgba(255,23,68,0.4); color: #ff5252; }
  #toast.info { background: rgba(0,229,255,0.1); border: 1px solid rgba(0,229,255,0.3); color: var(--accent); }

  /* LOADER */
  .spinner {
    width: 20px;
    height: 20px;
    border: 2px solid rgba(0,229,255,0.2);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin 0.7s linear infinite;
    display: inline-block;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* MOBILE */
  @media (max-width: 600px) {
    .hero-cta { flex-direction: column; align-items: center; }
    .plan-selector { grid-template-columns: 1fr; }
    .server-card { flex-direction: column; align-items: flex-start; }
    #nav { width: calc(100% - 24px); padding: 12px 16px; }
  }

  /* FLOATING PARTICLES */
  .particle {
    position: fixed;
    pointer-events: none;
    border-radius: 50%;
    z-index: 0;
    opacity: 0.15;
    animation: float linear infinite;
  }

  @keyframes float {
    0% { transform: translateY(100vh) translateX(0); opacity: 0; }
    10% { opacity: 0.15; }
    90% { opacity: 0.15; }
    100% { transform: translateY(-100px) translateX(40px); opacity: 0; }
  }

  select.form-input {
    -webkit-appearance: none;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2300e5ff' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 14px center;
    padding-right: 36px;
  }

  .free-limit-note {
    padding: 10px 14px;
    background: rgba(255,171,0,0.08);
    border: 1px solid rgba(255,171,0,0.25);
    border-radius: 8px;
    font-size: 0.8rem;
    color: var(--warning);
    margin-bottom: 16px;
    display: none;
  }

  /* USER MENU */
  .user-chip {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 7px 14px;
    border-radius: 10px;
    background: rgba(255,255,255,0.07);
    border: 1px solid rgba(255,255,255,0.1);
    cursor: default;
    font-size: 0.85rem;
    font-weight: 600;
    max-width: 180px;
    overflow: hidden;
  }

  .user-chip .avatar {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    font-weight: 800;
    color: #000;
    flex-shrink: 0;
  }
</style>
</head>
<body>

<!-- PARTICLES -->
<div id="particles"></div>

<!-- TOAST -->
<div id="toast"></div>

<!-- NAV -->
<nav id="nav">
  <div class="logo">SyntaxHosting</div>
  <div class="nav-links" id="nav-links">
    <button class="btn btn-ghost" onclick="showSection('pricing-section')">Pricing</button>
    <button class="btn btn-ghost" onclick="showAuthPage('login')">Login</button>
    <button class="btn btn-primary" onclick="showAuthPage('register')">Get Started</button>
  </div>
  <div class="nav-links" id="nav-auth" style="display:none">
    <div class="user-chip" id="user-chip">
      <div class="avatar" id="user-avatar">?</div>
      <span id="user-email-short" style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap"></span>
    </div>
    <button class="btn btn-ghost" onclick="showDashboard()">Dashboard</button>
    <button class="btn btn-ghost" onclick="logout()">Logout</button>
  </div>
</nav>

<!-- LANDING PAGE -->
<div id="page-landing" class="page active">
  <section id="landing">
    <div class="hero-tag">‚ö° High-Performance Hosting</div>
    <h1 class="hero-title">Server Hosting<br><span>Reinvented.</span></h1>
    <p class="hero-sub">Deploy game servers and applications in seconds. Powered by NVMe SSDs and enterprise-grade infrastructure.</p>
    <div class="hero-cta">
      <button class="btn btn-primary" onclick="showAuthPage('register')">Start for Free</button>
      <button class="btn btn-ghost" onclick="scrollToPricing()">View Plans ‚Üí</button>
    </div>
    <div class="stats-row">
      <div class="stat-card glass">
        <div class="num">99.9%</div>
        <div class="label">Uptime SLA</div>
      </div>
      <div class="stat-card glass">
        <div class="num">&lt;1ms</div>
        <div class="label">Network Latency</div>
      </div>
      <div class="stat-card glass">
        <div class="num">NVMe</div>
        <div class="label">SSD Storage</div>
      </div>
      <div class="stat-card glass">
        <div class="num">24/7</div>
        <div class="label">Support</div>
      </div>
    </div>
  </section>

  <section id="pricing-section">
    <h2 class="section-title">Simple Pricing</h2>
    <p class="section-sub">Choose the plan that's right for you. Upgrade anytime.</p>
    <div class="plans-grid">
      <!-- Free -->
      <div class="plan-card glass">
        <div class="plan-name">Free Plan</div>
        <p style="color:var(--text-dim);font-size:0.85rem">Perfect to get started</p>
        <div class="plan-price">‚Ç¨0<span>/mo</span></div>
        <ul class="plan-features">
          <li>256 MB RAM</li>
          <li>2 GB NVMe SSD</li>
          <li>1 Server max</li>
          <li>Basic Console Access</li>
          <li>Community Support</li>
        </ul>
        <button class="btn btn-ghost" style="width:100%" onclick="showAuthPage('register')">Get Started Free</button>
      </div>
      <!-- Premium -->
      <div class="plan-card glass featured">
        <div class="plan-badge">Most Popular</div>
        <div class="plan-name">SyntaxPremium</div>
        <p style="color:var(--text-dim);font-size:0.85rem">For serious projects</p>
        <div class="plan-price">‚Ç¨4.99<span>/mo</span></div>
        <ul class="plan-features">
          <li>2 GB RAM</li>
          <li>20 GB NVMe SSD</li>
          <li>Unlimited Servers</li>
          <li>Full Console Access</li>
          <li>Priority Support</li>
          <li>Custom Domains</li>
          <li>Automated Backups</li>
        </ul>
        <button class="btn btn-primary" style="width:100%" onclick="showAuthPage('register')">Get SyntaxPremium</button>
      </div>
    </div>
  </section>

  <footer style="text-align:center;padding:40px 20px;color:var(--text-dim);font-size:0.82rem;position:relative;z-index:1">
    ¬© 2025 SyntaxHosting. All rights reserved.
  </footer>
</div>

<!-- AUTH PAGE -->
<div id="page-auth" class="page">
  <div id="auth-page">
    <div class="auth-box glass-heavy">
      <div class="auth-title" id="auth-title">Welcome Back</div>
      <div class="auth-sub" id="auth-sub">Sign in to your SyntaxHosting account</div>
      <div class="error-msg" id="auth-error"></div>

      <div id="login-form">
        <div class="form-group">
          <label>Email</label>
          <input type="email" class="form-input" id="login-email" placeholder="you@example.com">
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" class="form-input" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        </div>
        <button class="btn btn-primary" style="width:100%;padding:13px" onclick="doLogin()" id="login-btn">Sign In</button>
        <div class="auth-switch">No account? <a onclick="showAuthPage('register')">Create one free</a></div>
      </div>

      <div id="register-form" style="display:none">
        <div class="form-group">
          <label>Username</label>
          <input type="text" class="form-input" id="reg-name" placeholder="cooluser123">
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" class="form-input" id="reg-email" placeholder="you@example.com">
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" class="form-input" id="reg-password" placeholder="At least 6 characters">
        </div>
        <button class="btn btn-primary" style="width:100%;padding:13px" onclick="doRegister()" id="reg-btn">Create Account</button>
        <div class="auth-switch">Already have an account? <a onclick="showAuthPage('login')">Sign in</a></div>
      </div>
    </div>
  </div>
</div>

<!-- DASHBOARD -->
<div id="page-dashboard" class="page">
  <div id="dashboard">
    <div class="dash-container">
      <div class="dash-header">
        <div>
          <div class="dash-welcome">Welcome, <span id="dash-username">User</span></div>
          <div style="color:var(--text-dim);font-size:0.85rem;margin-top:4px">Manage your servers from here</div>
        </div>
        <button class="btn btn-primary" onclick="openCreateModal()">+ New Server</button>
      </div>

      <div class="dash-grid">
        <div class="dash-stat glass">
          <div class="dash-stat-label">Active Servers</div>
          <div class="dash-stat-val" id="stat-servers">0</div>
        </div>
        <div class="dash-stat glass">
          <div class="dash-stat-label">Plan</div>
          <div class="dash-stat-val" id="stat-plan" style="font-size:1.2rem">Free</div>
        </div>
        <div class="dash-stat glass">
          <div class="dash-stat-label">Total RAM</div>
          <div class="dash-stat-val" id="stat-ram">0 MB</div>
        </div>
        <div class="dash-stat glass">
          <div class="dash-stat-label">Total SSD</div>
          <div class="dash-stat-val" id="stat-ssd">0 GB</div>
        </div>
      </div>

      <div class="servers-section">
        <div class="servers-header">
          <div class="servers-title">Your Servers</div>
        </div>
        <div id="servers-list">
          <div class="empty-state glass">
            <div class="icon">üñ•Ô∏è</div>
            <h3>No servers yet</h3>
            <p>Create your first server to get started</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- CONSOLE PAGE -->
<div id="page-console" class="page">
  <div id="console-page">
    <div class="console-container">
      <div class="console-header">
        <button class="console-back" onclick="showDashboard()">‚Üê Back</button>
        <div>
          <div class="console-server-name" id="console-server-name">Server</div>
          <div style="color:var(--text-dim);font-size:0.78rem;font-family:'JetBrains Mono',monospace" id="console-server-id"></div>
        </div>
        <div style="margin-left:auto;display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn-sm btn-sm-accent" onclick="startServer()">‚ñ∂ Start</button>
          <button class="btn-sm btn-sm-glass" onclick="stopServer()">‚èπ Stop</button>
          <button class="btn-sm btn-sm-glass" onclick="restartServer()">‚Ü∫ Restart</button>
        </div>
      </div>

      <div class="console-layout">
        <div>
          <div class="console-terminal">
            <div class="terminal-bar">
              <div class="term-dot red"></div>
              <div class="term-dot yellow"></div>
              <div class="term-dot green"></div>
              <div class="terminal-title" id="term-title">console ‚Äî bash</div>
            </div>
            <div class="terminal-body" id="terminal-body"></div>
            <div class="terminal-input-row">
              <span class="term-prompt">server@syntax:~$</span>
              <input type="text" class="term-input" id="term-input" placeholder="Enter command..." onkeydown="handleTermInput(event)">
            </div>
          </div>
        </div>

        <div class="console-sidebar">
          <div class="sidebar-card glass">
            <div class="sidebar-title">Resources</div>
            <div class="resource-bar">
              <div class="resource-label"><span>RAM</span><span id="ram-usage">0 / 256 MB</span></div>
              <div class="progress-track"><div class="progress-fill" id="ram-bar" style="width:0%"></div></div>
            </div>
            <div class="resource-bar">
              <div class="resource-label"><span>CPU</span><span id="cpu-usage">0%</span></div>
              <div class="progress-track"><div class="progress-fill" id="cpu-bar" style="width:0%"></div></div>
            </div>
            <div class="resource-bar">
              <div class="resource-label"><span>SSD</span><span id="ssd-usage">0 / 2 GB</span></div>
              <div class="progress-track"><div class="progress-fill" id="ssd-bar" style="width:5%"></div></div>
            </div>
          </div>

          <div class="sidebar-card glass">
            <div class="sidebar-title">Server Info</div>
            <div class="server-info-row"><span class="key">Status</span><span class="val" id="info-status">Offline</span></div>
            <div class="server-info-row"><span class="key">Plan</span><span class="val" id="info-plan">-</span></div>
            <div class="server-info-row"><span class="key">RAM</span><span class="val" id="info-ram">-</span></div>
            <div class="server-info-row"><span class="key">SSD</span><span class="val" id="info-ssd">-</span></div>
            <div class="server-info-row"><span class="key">Created</span><span class="val" id="info-created">-</span></div>
          </div>

          <div class="sidebar-card glass">
            <div class="sidebar-title">Quick Commands</div>
            <div class="console-btn-group">
              <button class="btn-sm btn-sm-glass" style="text-align:left" onclick="quickCmd('help')">help ‚Äî Show commands</button>
              <button class="btn-sm btn-sm-glass" style="text-align:left" onclick="quickCmd('status')">status ‚Äî Server status</button>
              <button class="btn-sm btn-sm-glass" style="text-align:left" onclick="quickCmd('uptime')">uptime ‚Äî Show uptime</button>
              <button class="btn-sm btn-sm-glass" style="text-align:left" onclick="quickCmd('clear')">clear ‚Äî Clear console</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- CREATE SERVER MODAL -->
<div class="modal-overlay" id="create-modal">
  <div class="modal glass-heavy">
    <button class="modal-close" onclick="closeCreateModal()">‚úï</button>
    <div class="modal-title">Create New Server</div>
    <div class="modal-sub">Configure and deploy your server instantly</div>

    <div class="free-limit-note" id="free-limit-note">
      ‚ö†Ô∏è Free plan allows only 1 server. You've reached the limit. Upgrade to SyntaxPremium for unlimited servers.
    </div>

    <div class="form-group">
      <label>Server Name</label>
      <input type="text" class="form-input" id="server-name-input" placeholder="my-awesome-server">
    </div>

    <div class="form-group">
      <label>Select Plan</label>
      <div class="plan-selector">
        <div class="plan-option" id="opt-free" onclick="selectPlan('free')">
          <div class="plan-opt-name">Free Plan</div>
          <div class="plan-opt-specs">256MB RAM<br>2GB SSD<br>‚Ç¨0/mo</div>
        </div>
        <div class="plan-option" id="opt-premium" onclick="selectPlan('premium')">
          <div class="plan-opt-name">SyntaxPremium</div>
          <div class="plan-opt-specs">2GB RAM<br>20GB SSD<br>‚Ç¨4.99/mo</div>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label>Server Type</label>
      <select class="form-input" id="server-type-input">
        <option value="minecraft">Minecraft Java Edition</option>
        <option value="minecraft_bedrock">Minecraft Bedrock</option>
        <option value="nodejs">Node.js App</option>
        <option value="python">Python App</option>
        <option value="discord_bot">Discord Bot</option>
        <option value="custom">Custom Server</option>
      </select>
    </div>

    <div id="create-error" class="error-msg"></div>

    <button class="btn btn-primary" style="width:100%;padding:13px" onclick="createServer()" id="create-btn">
      Deploy Server
    </button>
  </div>
</div>

<!-- Firebase SDKs -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getDatabase, ref, set, get, push, remove, onValue, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBmNMw8nzum2g8-40CqncKURVquKZJt4gs",
    authDomain: "syntaxhosting-c19ad.firebaseapp.com",
    projectId: "syntaxhosting-c19ad",
    storageBucket: "syntaxhosting-c19ad.firebasestorage.app",
    messagingSenderId: "1019167740846",
    appId: "1:1019167740846:web:52fc24e5bf0c5bc40c6e3f",
    measurementId: "G-6LXF7L6TGW",
    databaseURL: "https://syntaxhosting-c19ad-default-rtdb.firebaseio.com"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getDatabase(app);

  // Expose globally
  window._auth = auth;
  window._db = db;
  window._ref = ref;
  window._set = set;
  window._get = get;
  window._push = push;
  window._remove = remove;
  window._onValue = onValue;
  window._serverTimestamp = serverTimestamp;
  window._signOut = signOut;
  window._createUserWithEmailAndPassword = createUserWithEmailAndPassword;
  window._signInWithEmailAndPassword = signInWithEmailAndPassword;
  window._updateProfile = updateProfile;

  // Auth state listener
  onAuthStateChanged(auth, user => {
    if (user) {
      window._currentUser = user;
      document.getElementById('nav-links').style.display = 'none';
      document.getElementById('nav-auth').style.display = 'flex';
      const email = user.email || '';
      document.getElementById('user-email-short').textContent = email.length > 18 ? email.substring(0,16)+'‚Ä¶' : email;
      document.getElementById('user-avatar').textContent = (user.displayName || email).charAt(0).toUpperCase();
      document.getElementById('dash-username').textContent = user.displayName || email.split('@')[0];
      loadServers();
      if (!window._dashShown) {
        showDashboard();
        window._dashShown = true;
      }
    } else {
      window._currentUser = null;
      document.getElementById('nav-links').style.display = 'flex';
      document.getElementById('nav-auth').style.display = 'none';
      window._dashShown = false;
    }
  });

  // LOAD SERVERS
  window.loadServers = function() {
    const user = window._currentUser;
    if (!user) return;
    const serversRef = window._ref(window._db, `servers/${user.uid}`);
    window._onValue(serversRef, (snapshot) => {
      const data = snapshot.val();
      window._serversData = data || {};
      renderServers(data);
      updateDashStats(data);
    });
  };

  window.createServer = async function() {
    const user = window._currentUser;
    if (!user) return;

    const name = document.getElementById('server-name-input').value.trim();
    const plan = window._selectedPlan;
    const type = document.getElementById('server-type-input').value;
    const btn = document.getElementById('create-btn');
    const errDiv = document.getElementById('create-error');

    errDiv.style.display = 'none';

    if (!name) { showCreateError('Please enter a server name.'); return; }
    if (!plan) { showCreateError('Please select a plan.'); return; }
    if (!/^[a-zA-Z0-9_-]+$/.test(name)) { showCreateError('Name can only contain letters, numbers, - and _'); return; }

    // Check free limit
    const servers = window._serversData || {};
    const serverList = Object.values(servers);
    if (plan === 'free') {
      const freeServers = serverList.filter(s => s.plan === 'free');
      if (freeServers.length >= 1) {
        showCreateError('Free plan allows max 1 server. Upgrade to SyntaxPremium for unlimited servers.');
        return;
      }
    }

    btn.disabled = true;
    btn.innerHTML = '<span class="spinner"></span> Deploying...';

    try {
      const newRef = window._push(window._ref(window._db, `servers/${user.uid}`));
      const specs = plan === 'free' ? { ram: '256MB', ssd: '2GB' } : { ram: '2GB', ssd: '20GB' };
      await window._set(newRef, {
        name,
        plan,
        type,
        status: 'offline',
        ram: specs.ram,
        ssd: specs.ssd,
        createdAt: Date.now(),
        uid: newRef.key
      });
      closeCreateModal();
      showToast('Server deployed successfully!', 'success');
    } catch (e) {
      showCreateError('Error: ' + e.message);
    }

    btn.disabled = false;
    btn.innerHTML = 'Deploy Server';
  };

  window.deleteServer = async function(serverId) {
    const user = window._currentUser;
    if (!user) return;
    if (!confirm('Are you sure you want to delete this server? This cannot be undone.')) return;
    try {
      await window._remove(window._ref(window._db, `servers/${user.uid}/${serverId}`));
      showToast('Server deleted.', 'info');
      if (window._currentConsoleServer === serverId) showDashboard();
    } catch(e) {
      showToast('Error deleting server: ' + e.message, 'error');
    }
  };

  window.doLogin = async function() {
    const email = document.getElementById('login-email').value.trim();
    const pass = document.getElementById('login-password').value;
    const btn = document.getElementById('login-btn');
    const err = document.getElementById('auth-error');
    err.style.display = 'none';

    if (!email || !pass) { showAuthError('Please fill in all fields.'); return; }

    btn.disabled = true;
    btn.innerHTML = '<span class="spinner"></span>';

    try {
      await window._signInWithEmailAndPassword(window._auth, email, pass);
    } catch(e) {
      showAuthError(firebaseErrMsg(e.code));
    }

    btn.disabled = false;
    btn.innerHTML = 'Sign In';
  };

  window.doRegister = async function() {
    const name = document.getElementById('reg-name').value.trim();
    const email = document.getElementById('reg-email').value.trim();
    const pass = document.getElementById('reg-password').value;
    const btn = document.getElementById('reg-btn');
    const err = document.getElementById('auth-error');
    err.style.display = 'none';

    if (!name || !email || !pass) { showAuthError('Please fill in all fields.'); return; }
    if (pass.length < 6) { showAuthError('Password must be at least 6 characters.'); return; }

    btn.disabled = true;
    btn.innerHTML = '<span class="spinner"></span>';

    try {
      const cred = await window._createUserWithEmailAndPassword(window._auth, email, pass);
      await window._updateProfile(cred.user, { displayName: name });
      window._currentUser = cred.user;
    } catch(e) {
      showAuthError(firebaseErrMsg(e.code));
    }

    btn.disabled = false;
    btn.innerHTML = 'Create Account';
  };

  window.logout = async function() {
    await window._signOut(window._auth);
    window._serversData = {};
    showPage('page-landing');
    showToast('Logged out.', 'info');
  };

  function firebaseErrMsg(code) {
    const map = {
      'auth/user-not-found': 'No account found with this email.',
      'auth/wrong-password': 'Incorrect password.',
      'auth/invalid-email': 'Invalid email address.',
      'auth/email-already-in-use': 'Email already registered.',
      'auth/weak-password': 'Password is too weak.',
      'auth/invalid-credential': 'Invalid email or password.',
      'auth/too-many-requests': 'Too many attempts. Try again later.',
    };
    return map[code] || 'Authentication error. Please try again.';
  }
</script>

<script>
  // ==============================
  // STATE
  // ==============================
  window._serversData = {};
  window._selectedPlan = 'free';
  window._currentConsoleServer = null;
  window._serverStatus = {};
  window._resourceInterval = null;
  window._termHistory = [];
  window._termHistoryIdx = -1;
  window._cmdHistory = [];

  // ==============================
  // PAGE ROUTING
  // ==============================
  function showPage(pageId) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
    window.scrollTo(0, 0);
  }

  function showSection(id) {
    if (document.getElementById('page-landing').classList.contains('active')) {
      document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
    } else {
      showPage('page-landing');
      setTimeout(() => document.getElementById(id).scrollIntoView({ behavior: 'smooth' }), 100);
    }
  }

  function scrollToPricing() {
    document.getElementById('pricing-section').scrollIntoView({ behavior: 'smooth' });
  }

  function showAuthPage(mode) {
    showPage('page-auth');
    if (mode === 'login') {
      document.getElementById('auth-title').textContent = 'Welcome Back';
      document.getElementById('auth-sub').textContent = 'Sign in to your SyntaxHosting account';
      document.getElementById('login-form').style.display = 'block';
      document.getElementById('register-form').style.display = 'none';
    } else {
      document.getElementById('auth-title').textContent = 'Create Account';
      document.getElementById('auth-sub').textContent = 'Start hosting for free, no credit card required';
      document.getElementById('login-form').style.display = 'none';
      document.getElementById('register-form').style.display = 'block';
    }
    document.getElementById('auth-error').style.display = 'none';
  }

  function showDashboard() {
    showPage('page-dashboard');
    if (window._resourceInterval) { clearInterval(window._resourceInterval); window._resourceInterval = null; }
  }

  function showAuthError(msg) {
    const el = document.getElementById('auth-error');
    el.textContent = msg;
    el.style.display = 'block';
  }

  function showCreateError(msg) {
    const el = document.getElementById('create-error');
    el.textContent = msg;
    el.style.display = 'block';
  }

  // ==============================
  // RENDER SERVERS
  // ==============================
  function renderServers(data) {
    const container = document.getElementById('servers-list');
    if (!data || Object.keys(data).length === 0) {
      container.innerHTML = `<div class="empty-state glass">
        <div class="icon">üñ•Ô∏è</div>
        <h3>No servers yet</h3>
        <p>Click "+ New Server" to create your first server</p>
      </div>`;
      return;
    }

    container.innerHTML = '';
    Object.entries(data).forEach(([id, server]) => {
      const statusClass = server.status || 'offline';
      const badgeClass = server.plan === 'premium' ? 'badge-premium' : 'badge-free';
      const badgeText = server.plan === 'premium' ? 'SyntaxPremium' : 'Free Plan';
      const date = server.createdAt ? new Date(server.createdAt).toLocaleDateString() : '?';
      const typeLabel = {
        minecraft: 'Minecraft Java', minecraft_bedrock: 'Minecraft Bedrock',
        nodejs: 'Node.js', python: 'Python', discord_bot: 'Discord Bot', custom: 'Custom'
      }[server.type] || server.type;

      const card = document.createElement('div');
      card.className = 'server-card glass';
      card.innerHTML = `
        <div class="server-status ${statusClass}"></div>
        <div class="server-info">
          <div class="server-name">${escHtml(server.name)}</div>
          <div class="server-meta">${typeLabel} ¬∑ ${server.ram} RAM ¬∑ ${server.ssd} SSD ¬∑ Created ${date}</div>
        </div>
        <div class="server-plan-badge ${badgeClass}">${badgeText}</div>
        <div class="server-actions">
          <button class="btn-sm btn-sm-accent" onclick="openConsole('${id}')">Console</button>
          <button class="btn-sm btn-sm-danger" onclick="window.deleteServer('${id}')">Delete</button>
        </div>
      `;
      container.appendChild(card);
    });
  }

  function updateDashStats(data) {
    const servers = data ? Object.values(data) : [];
    document.getElementById('stat-servers').textContent = servers.length;
    const hasPremium = servers.some(s => s.plan === 'premium');
    document.getElementById('stat-plan').textContent = hasPremium ? 'Premium' : 'Free';

    let totalRamMB = 0, totalSSDGB = 0;
    servers.forEach(s => {
      totalRamMB += s.ram === '2GB' ? 2048 : 256;
      totalSSDGB += s.ssd === '20GB' ? 20 : 2;
    });
    document.getElementById('stat-ram').textContent = totalRamMB >= 1024 ? (totalRamMB/1024).toFixed(1)+'GB' : totalRamMB+'MB';
    document.getElementById('stat-ssd').textContent = totalSSDGB+'GB';
  }

  function escHtml(s) {
    return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
  }

  // ==============================
  // CREATE MODAL
  // ==============================
  function openCreateModal() {
    if (!window._currentUser) { showAuthPage('login'); return; }

    const servers = Object.values(window._serversData || {});
    const freeCount = servers.filter(s => s.plan === 'free').length;
    const note = document.getElementById('free-limit-note');
    const optFree = document.getElementById('opt-free');

    if (freeCount >= 1) {
      note.style.display = 'block';
      optFree.classList.add('disabled');
      selectPlan('premium');
    } else {
      note.style.display = 'none';
      optFree.classList.remove('disabled');
      selectPlan('free');
    }

    document.getElementById('server-name-input').value = '';
    document.getElementById('create-error').style.display = 'none';
    document.getElementById('create-modal').classList.add('open');
  }

  function closeCreateModal() {
    document.getElementById('create-modal').classList.remove('open');
  }

  document.getElementById('create-modal').addEventListener('click', function(e) {
    if (e.target === this) closeCreateModal();
  });

  function selectPlan(plan) {
    const freeOpt = document.getElementById('opt-free');
    if (plan === 'free' && freeOpt.classList.contains('disabled')) return;
    window._selectedPlan = plan;
    document.getElementById('opt-free').classList.toggle('selected', plan === 'free');
    document.getElementById('opt-premium').classList.toggle('selected', plan === 'premium');
  }

  // ==============================
  // CONSOLE
  // ==============================
  function openConsole(serverId) {
    const server = (window._serversData || {})[serverId];
    if (!server) return;
    window._currentConsoleServer = serverId;
    window._currentConsoleServerData = server;
    window._serverStatus[serverId] = server.status || 'offline';

    document.getElementById('console-server-name').textContent = server.name;
    document.getElementById('console-server-id').textContent = `ID: ${serverId}`;
    document.getElementById('term-title').textContent = `${server.name} ‚Äî console`;

    // sidebar info
    document.getElementById('info-plan').textContent = server.plan === 'premium' ? 'SyntaxPremium' : 'Free Plan';
    document.getElementById('info-ram').textContent = server.ram;
    document.getElementById('info-ssd').textContent = server.ssd;
    document.getElementById('info-created').textContent = server.createdAt ? new Date(server.createdAt).toLocaleDateString() : '?';

    // resource bars
    const maxRam = server.ram === '2GB' ? 2048 : 256;
    const maxSSD = server.ssd === '20GB' ? 20 : 2;
    document.getElementById('ram-usage').textContent = `0 / ${server.ram}`;
    document.getElementById('ssd-usage').textContent = `0 / ${server.ssd}`;
    document.getElementById('ram-bar').style.width = '0%';
    document.getElementById('cpu-bar').style.width = '0%';
    document.getElementById('ssd-bar').style.width = '5%';

    updateConsoleStatus(window._serverStatus[serverId]);
    showPage('page-console');

    // Clear terminal
    const body = document.getElementById('terminal-body');
    body.innerHTML = '';
    window._cmdHistory = [];

    termPrint('info', `SyntaxHosting Console v1.0 ‚Äî ${server.name}`);
    termPrint('dim', `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ`);
    termPrint('dim', `Plan: ${server.plan === 'premium' ? 'SyntaxPremium' : 'Free Plan'} | RAM: ${server.ram} | SSD: ${server.ssd}`);
    termPrint('dim', `Type 'help' for available commands.`);
    termPrint('', '');

    if (server.status === 'online') {
      termPrint('success', `[${ts()}] Server is online and running.`);
      startResourceSim(maxRam, maxSSD);
    } else {
      termPrint('warn', `[${ts()}] Server is offline. Use 'start' to start it.`);
    }

    document.getElementById('term-input').focus();
  }

  function ts() {
    return new Date().toLocaleTimeString();
  }

  function termPrint(type, msg) {
    const body = document.getElementById('terminal-body');
    const line = document.createElement('div');
    line.className = 'term-line' + (type ? ` term-${type}` : '');
    line.textContent = msg;
    body.appendChild(line);
    body.scrollTop = body.scrollHeight;
  }

  function handleTermInput(e) {
    if (e.key === 'Enter') {
      const input = document.getElementById('term-input');
      const cmd = input.value.trim();
      if (!cmd) return;
      window._cmdHistory.unshift(cmd);
      window._termHistoryIdx = -1;
      termPrint('', `server@syntax:~$ ${cmd}`);
      input.value = '';
      processCmd(cmd);
    } else if (e.key === 'ArrowUp') {
      e.preventDefault();
      if (window._termHistoryIdx < window._cmdHistory.length - 1) {
        window._termHistoryIdx++;
        document.getElementById('term-input').value = window._cmdHistory[window._termHistoryIdx] || '';
      }
    } else if (e.key === 'ArrowDown') {
      e.preventDefault();
      if (window._termHistoryIdx > 0) {
        window._termHistoryIdx--;
        document.getElementById('term-input').value = window._cmdHistory[window._termHistoryIdx] || '';
      } else {
        window._termHistoryIdx = -1;
        document.getElementById('term-input').value = '';
      }
    }
  }

  function quickCmd(cmd) {
    document.getElementById('term-input').value = cmd;
    document.getElementById('term-input').focus();
    termPrint('', `server@syntax:~$ ${cmd}`);
    document.getElementById('term-input').value = '';
    processCmd(cmd);
  }

  function processCmd(cmd) {
    const serverId = window._currentConsoleServer;
    const status = window._serverStatus[serverId] || 'offline';
    const parts = cmd.toLowerCase().trim().split(' ');
    const main = parts[0];

    switch(main) {
      case 'help':
        termPrint('info', 'Available commands:');
        termPrint('', '  start          ‚Äî Start the server');
        termPrint('', '  stop           ‚Äî Stop the server');
        termPrint('', '  restart        ‚Äî Restart the server');
        termPrint('', '  status         ‚Äî Show server status');
        termPrint('', '  uptime         ‚Äî Show server uptime');
        termPrint('', '  info           ‚Äî Show server information');
        termPrint('', '  ram            ‚Äî Show RAM usage');
        termPrint('', '  cpu            ‚Äî Show CPU usage');
        termPrint('', '  clear          ‚Äî Clear the console');
        termPrint('', '  echo [text]    ‚Äî Echo text');
        termPrint('', '  ls             ‚Äî List files');
        termPrint('', '  version        ‚Äî Show server version');
        break;
      case 'start':
        startServer();
        break;
      case 'stop':
        stopServer();
        break;
      case 'restart':
        restartServer();
        break;
      case 'status':
        termPrint(status === 'online' ? 'success' : 'warn', `Status: ${status.toUpperCase()}`);
        break;
      case 'uptime':
        if (status !== 'online') { termPrint('warn', 'Server is not running.'); break; }
        const upSec = Math.floor(Math.random() * 86400);
        const h = Math.floor(upSec/3600), m = Math.floor((upSec%3600)/60), s = upSec%60;
        termPrint('', `Uptime: ${h}h ${m}m ${s}s`);
        break;
      case 'info':
        const sd = window._currentConsoleServerData;
        termPrint('info', 'Server Information:');
        termPrint('', `  Name:    ${sd.name}`);
        termPrint('', `  Plan:    ${sd.plan === 'premium' ? 'SyntaxPremium' : 'Free Plan'}`);
        termPrint('', `  RAM:     ${sd.ram}`);
        termPrint('', `  SSD:     ${sd.ssd}`);
        termPrint('', `  Type:    ${sd.type}`);
        termPrint('', `  Status:  ${status}`);
        break;
      case 'ram':
        const ramPct = window._lastRamPct || 0;
        const sd2 = window._currentConsoleServerData;
        const maxR = sd2.ram === '2GB' ? 2048 : 256;
        const used = Math.round(maxR * ramPct / 100);
        termPrint('', `RAM: ${used}MB / ${maxR}MB (${ramPct.toFixed(1)}%)`);
        break;
      case 'cpu':
        termPrint('', `CPU: ${(window._lastCpuPct || 0).toFixed(1)}%`);
        break;
      case 'clear':
        document.getElementById('terminal-body').innerHTML = '';
        break;
      case 'echo':
        termPrint('', parts.slice(1).join(' '));
        break;
      case 'ls':
        termPrint('', 'server.jar  config.yml  plugins/  world/  logs/');
        break;
      case 'version':
        termPrint('info', 'SyntaxHosting Runtime v2.1.4');
        termPrint('', 'Java: OpenJDK 21.0.1');
        termPrint('', 'OS: Ubuntu 22.04 LTS');
        break;
      default:
        termPrint('error', `Command not found: ${main}. Type 'help' for available commands.`);
    }
  }

  function updateConsoleStatus(status) {
    document.getElementById('info-status').textContent = status.charAt(0).toUpperCase() + status.slice(1);
    document.getElementById('info-status').style.color = status === 'online' ? 'var(--success)' : status === 'starting' ? 'var(--warning)' : 'var(--danger)';
  }

  async function startServer() {
    const serverId = window._currentConsoleServer;
    if (!serverId) return;
    const status = window._serverStatus[serverId];
    if (status === 'online') { termPrint('warn', `[${ts()}] Server is already running.`); return; }
    if (status === 'starting') { termPrint('warn', `[${ts()}] Server is already starting.`); return; }

    window._serverStatus[serverId] = 'starting';
    updateConsoleStatus('starting');
    termPrint('warn', `[${ts()}] Starting server...`);

    const sd = window._currentConsoleServerData;
    const maxRam = sd.ram === '2GB' ? 2048 : 256;
    const maxSSD = sd.ssd === '20GB' ? 20 : 2;

    setTimeout(() => {
      termPrint('info', `[${ts()}] Loading server files...`);
    }, 400);
    setTimeout(() => {
      termPrint('info', `[${ts()}] Allocating ${sd.ram} RAM...`);
    }, 900);
    setTimeout(() => {
      termPrint('info', `[${ts()}] Initializing runtime...`);
    }, 1500);
    setTimeout(async () => {
      window._serverStatus[serverId] = 'online';
      updateConsoleStatus('online');
      termPrint('success', `[${ts()}] Server started successfully!`);
      startResourceSim(maxRam, maxSSD);
      // Update Firebase
      try {
        await window._set(window._ref(window._db, `servers/${window._currentUser.uid}/${serverId}/status`), 'online');
      } catch(e) {}
    }, 2600);
  }

  async function stopServer() {
    const serverId = window._currentConsoleServer;
    if (!serverId) return;
    const status = window._serverStatus[serverId];
    if (status === 'offline') { termPrint('warn', `[${ts()}] Server is already offline.`); return; }

    termPrint('warn', `[${ts()}] Stopping server...`);
    if (window._resourceInterval) { clearInterval(window._resourceInterval); window._resourceInterval = null; }

    setTimeout(async () => {
      window._serverStatus[serverId] = 'offline';
      updateConsoleStatus('offline');
      termPrint('info', `[${ts()}] Server stopped.`);
      // Reset resources
      document.getElementById('ram-bar').style.width = '0%';
      document.getElementById('cpu-bar').style.width = '0%';
      document.getElementById('ram-usage').textContent = `0 / ${window._currentConsoleServerData.ram}`;
      document.getElementById('cpu-usage').textContent = '0%';
      window._lastRamPct = 0;
      window._lastCpuPct = 0;
      try {
        await window._set(window._ref(window._db, `servers/${window._currentUser.uid}/${serverId}/status`), 'offline');
      } catch(e) {}
    }, 1200);
  }

  function restartServer() {
    const serverId = window._currentConsoleServer;
    if (!serverId) return;
    termPrint('warn', `[${ts()}] Restarting server...`);
    if (window._resourceInterval) { clearInterval(window._resourceInterval); window._resourceInterval = null; }
    window._serverStatus[serverId] = 'starting';
    updateConsoleStatus('starting');
    setTimeout(() => {
      termPrint('info', `[${ts()}] Server stopped. Restarting...`);
      setTimeout(() => startServer(), 800);
    }, 1000);
  }

  function startResourceSim(maxRam, maxSSD) {
    if (window._resourceInterval) clearInterval(window._resourceInterval);
    let ramPct = 15 + Math.random() * 20;
    let cpuPct = 5 + Math.random() * 15;
    const ssdPct = 5 + Math.random() * 10;
    document.getElementById('ssd-bar').style.width = ssdPct + '%';
    document.getElementById('ssd-usage').textContent = `${(maxSSD * ssdPct / 100).toFixed(1)} / ${window._currentConsoleServerData.ssd}`;

    window._resourceInterval = setInterval(() => {
      ramPct += (Math.random() - 0.5) * 4;
      cpuPct += (Math.random() - 0.5) * 8;
      ramPct = Math.max(5, Math.min(90, ramPct));
      cpuPct = Math.max(1, Math.min(95, cpuPct));
      window._lastRamPct = ramPct;
      window._lastCpuPct = cpuPct;

      const ramUsed = Math.round(maxRam * ramPct / 100);
      document.getElementById('ram-bar').style.width = ramPct + '%';
      document.getElementById('cpu-bar').style.width = cpuPct + '%';
      document.getElementById('ram-usage').textContent = `${ramUsed}MB / ${window._currentConsoleServerData.ram}`;
      document.getElementById('cpu-usage').textContent = cpuPct.toFixed(1) + '%';
    }, 2000);
  }

  // ==============================
  // TOAST
  // ==============================
  let toastTimeout;
  function showToast(msg, type = 'info') {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.className = `show ${type}`;
    clearTimeout(toastTimeout);
    toastTimeout = setTimeout(() => { t.className = type; }, 3500);
  }

  // ==============================
  // PARTICLES
  // ==============================
  function spawnParticles() {
    const container = document.getElementById('particles');
    for (let i = 0; i < 12; i++) {
      const p = document.createElement('div');
      p.className = 'particle';
      const size = 2 + Math.random() * 4;
      const x = Math.random() * 100;
      const dur = 12 + Math.random() * 20;
      const delay = Math.random() * 15;
      const color = Math.random() > 0.5 ? '0,229,255' : '124,58,237';
      p.style.cssText = `width:${size}px;height:${size}px;left:${x}%;background:rgb(${color});animation-duration:${dur}s;animation-delay:-${delay}s;`;
      container.appendChild(p);
    }
  }
  spawnParticles();
</script>

</body>
</html>
